
{% load static %}
    
    
  
<!doctype html>
<html lang="en">
  <!-- [Head] start -->

  <head>
    <title>Home | droi</title>
    <!-- [Meta] -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="description" content="Able Pro is trending dashboard template made using Bootstrap 5 design framework. Able Pro is available in Bootstrap, React, CodeIgniter, Angular, and .net Technologies." />
<meta name="keywords" content="Bootstrap admin template, Dashboard UI Kit, Dashboard Template, Backend Panel, react dashboard, angular dashboard" />
<meta name="author" content="Phoenixcoded" />
<meta name="csrf-token" content="{{ csrf_token }}">


    <!-- [Favicon] icon -->
    <link rel="icon" href="{% static 'images/claimbridge.png' %}" type="image/x-icon" />
 <!-- [Font] Family -->
<link rel="stylesheet" href="{% static 'fonts/inter/inter.css' %}" id="main-font-link" />
<!-- [phosphor Icons] https://phosphoricons.com/ -->
<link rel="stylesheet" href="{% static 'fonts/phosphor/duotone/style.css' %}" />
<!-- [Tabler Icons] https://tablericons.com -->
<link rel="stylesheet" href="{% static 'fonts/tabler-icons.min.css' %}" />
<!-- [Feather Icons] https://feathericons.com -->
<link rel="stylesheet" href="{% static 'fonts/feather.css' %}" />
<!-- [Font Awesome Icons] https://fontawesome.com/icons -->
<link rel="stylesheet" href="{% static 'fonts/fontawesome.css' %}" />
<!-- [Material Icons] https://fonts.google.com/icons -->
<link rel="stylesheet" href="{% static 'fonts/material.css' %}" />
<!-- [Template CSS Files] -->
<link rel="stylesheet" href="{% static 'css/style.css'  %}" id="main-style-link"/>
<link rel="stylesheet" href="{% static 'css/style-preset.css' %}" />




<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdn.datatables.net/2.0.8/css/dataTables.bootstrap5.css">
<!-- Include Bootstrap CSS -->
<!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/5.3.0/css/bootstrap.min.css"> -->
<!-- Include DataTables CSS -->
<link rel="stylesheet" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css">

<script defer src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
<script defer src="https://cdn.datatables.net/2.0.8/js/dataTables.js"></script>
<script defer src="https://cdn.datatables.net/2.0.8/js/dataTables.bootstrap5.js"></script>

<style>
  .container {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
  }

  .form-column {
    display: flex;
    flex-direction: column;
    gap: 20px;
  }

  .form-group {
    display: flex;
    align-items: center;
    gap: 15px;
    margin-bottom: 20px;
  }

  label {
    font-weight: bold;
    flex-basis: 100px;
  }

  select {
    padding: 8px;
    border: 1px solid #ccc;
    border-radius: 4px;
    font-size: 16px;    
  }

  #header{
    width: 50%;
  }

  #state{
    width: 50%;
  }

  #category{
    width: 50%;
  }

  select[multiple] {
    height: 100px; /* Adjust this height to show more options at once */
  }

  input {
    border: #ccc solid 0.5px;
    width: 17%;
  }

  .table-column {
    margin-top: 0;
  }
</style>


  </head>
  <!-- [Head] end -->
  <!-- [Body] Start -->

  <body data-pc-preset="preset-1" data-pc-sidebar-caption="true" data-pc-layout="vertical" data-pc-direction="ltr" data-pc-theme_contrast="" data-pc-theme="light">
    <!-- [ Pre-loader ] start -->
<div class="page-loader">
  <div class="bar"></div>
</div>
<!-- [ Pre-loader ] End -->
 <!-- [ Sidebar Menu ] start -->
<nav class="pc-sidebar">
  <div class="navbar-wrapper">
    <div class="m-header">
      <a href="/welcome/" class="b-brand text-primary">
        <!-- ========   Change your logo from here   ============ -->
        <img src="{% static 'images/claimbridge.png' %}" class="img-fluid" width="160px" alt="logo" />
        <span class="badge bg-light-success rounded-pill ms-2 theme-version"></span>
      </a>
    </div>
    <div class="navbar-content">
      <div class="card pc-user-card">
        <div class="card-body">
          <div class="d-flex align-items-center">
            <div class="flex-shrink-0">
              <img src="{% static 'images/user/avatar-1.jpg' %}" alt="user-image" class="user-avtar wid-45 rounded-circle" />
            </div>
            <div class="flex-grow-1 ms-3 me-2">
              <small>Hi</small>
              <h6 class="mb-0">{{ request.session.username }}</h6>
             
            </div>
            <a class="btn btn-icon btn-link-secondary avtar" data-bs-toggle="collapse" href="#pc_sidebar_userlink">
              <svg class="pc-icon">
                <use xlink:href="#custom-sort-outline"></use>
              </svg>
            </a>
          </div>
          <div class="collapse pc-user-links" id="pc_sidebar_userlink">
            <div class="pt-3">
              <a href="#!">
                <i class="ti ti-user"></i>
                <span>My Account</span>
              </a>
              <a href="#!">
                <i class="ti ti-settings"></i>
                <span>Settings</span>
              </a>
              <a href="#!">
                <i class="ti ti-lock"></i>
                <span>Lock Screen</span>
              </a>
              <a href="#!">
                <i class="ti ti-power"></i>
                <span>Logout</span>
              </a>
            </div>
          </div>
        </div>
      </div>

      <ul class="pc-navbar">
        <li class="pc-item pc-caption">
          <label></label>
        </li>
        <li class="pc-item">
          <a href="/welcome/" class="pc-link" data-toggle="tooltip" title="Dashboard">
            <span class="pc-micon">
              <svg class="pc-icon">
                <use xlink:href="#custom-story"></use>
              </svg>
            </span>
            <span class="pc-mtext"></span>
          </a>
        </li>
        <li class="pc-item pc-hasmenu">
          <a href="/registration/" class="pc-link" data-toggle="tooltip" title="Workflow">
            <span class="pc-micon">
                <svg class="pc-icon">
                  <use xlink:href="#custom-fatrows"></use>
                </svg>
              </span>
            <span class="pc-mtext"></span>
             
          </a>
  
        </li>

        <li class="pc-item pc-hasmenu">
          <a href="/analytics/" class="pc-link" data-toggle="tooltip" title="Analytics">
            <span class="pc-micon">
                <svg class="pc-icon">
                  <use xlink:href="#custom-status-up"></use>
                </svg>
              </span>
            <span class="pc-mtext"></span>
             </a>
   
        </li>

        {% if request.session.usertype == 'admin' %}
            <li class="pc-item pc-hasmenu">
              <a href="/pricing_page/" class="pc-link" data-toggle="tooltip" title="Charges">
                <span class="pc-micon">
                  <svg class="pc-icon">
                    <use xlink:href="#custom-dollar-square"></use>
                  </svg>
                </span>
                <span class="pc-mtext"></span>
               
              </a>
           
            </li>
            {% endif %}

        <li class="pc-item pc-hasmenu">
          <a href="/logout/" class="pc-link" data-toggle="tooltip" title="Logout">
            <span class="pc-micon">
              <svg class="pc-icon me-2">
                <use xlink:href="#custom-logout-1-outline"></use></svg>
            </span>
            <span class="pc-mtext"></span>
           
          </a>
       
        </li>

        
  
   
  </ul>
  <div>
    <h6 style="position: absolute; bottom: 0;">  <span> Powered by Droidal</span><span><img src="{% static 'images/favicon1.png' %}" alt="img" style="height: 20px; margin-bottom: 3px; margin-left: 4px;"></span></h6> 
  </div>

</div>
</div>
</nav>
<header class="pc-header" style="backdrop-filter: blur(0px); background: none; width: 20px; position: absolute !important;">
<div class="ml-5">
<ul class="list-unstyled">

  <li class="pc-h-item pc-sidebar-collapse">
    <a href="#" class="pc-head-link ms-0" id="sidebar-hide" style="text-decoration: none;">
      <i class="ti ti-menu-2"></i>
    </a>
  </li>
  <li class="pc-h-item pc-sidebar-popup">
    <a href="#" class="pc-head-link ms-0" id="mobile-collapse" style="text-decoration: none;">
      <i class="ti ti-menu-2"></i>
    </a>
  </li>
  </ul>
</div>
</header>

      
      <div class="pc-container" style="top: 0px;">
        <div class="pc-content">
            <div class="tab-content"style="top: 0px; margin-left: 30px;">
                <div class="tab-pane active" id="home">       
                        <div class="row m-b-10">
                            <div class="col-md-3">
                              
                            
                            </div>
                           
                            
                        </div>                                   
 
                        <div style="margin-top: -8px; margin-left: -20px;">      

                                        
                                        <div style="max-width: 100%;"> 
                                          <h4 class="header-title mt-3" style="display: inline; margin-bottom: 30px;">Charges</h4>
                                          
                                          <div style="margin-top: 3%; margin-left: -40px;">
                                            

                                            <div class="container">
                                              <div class="form-column">
                                                <form id="chargeForm" action="javascript:void(0);">
                                                  {% csrf_token %}
                                                  <div class="form-group">
                                                    <label for="state">State</label>
                                                    <select name="" id="state">
                                                      <option value="">--Select State--</option>
                                                      <option value="Alabama">Alabama</option>
                                                      <option value="Arkansas">Arkansas</option>
                                                      <option value="Colorado">Colorado</option>
                                                      <option value="Delaware">Delaware</option>
                                                      <option value="Florida">Florida</option>
                                                      <option value="Georgia">Georgia</option>
                                                      <option value="Indiana">Indiana</option>
                                                      <option value="Iowa">Iowa</option>
                                                      <option value="New Jersey">New Jersey</option>
                                                      <option value="Kansas">Kansas</option>
                                                      <option value="Louisiana">Louisiana</option>
                                                      <option value="Michigan">Michigan</option>
                                                      <option value="Missouri">Missouri</option>
                                                      <option value="Maryland">Maryland</option>
                                                      <option value="Mississippi">Mississippi</option>
                                                      <option value="New York">New York</option>
                                                      <option value="North Carolina">North Carolina</option>
                                                      <option value="Ohio">Ohio</option>
                                                      <option value="Oklahoma">Oklahoma</option>
                                                      <option value="Oregon">Oregon</option>
                                                      <option value="Pennsylvania">Pennsylvania</option>
                                                      <option value="South Carolina">South Carolina</option>
                                                      <option value="Tennessee">Tennessee</option>
                                                      <option value="Texas">Texas</option>
                                                      <option value="Utah">Utah</option>
                                                      <option value="Virginia">Virginia</option>
                                                      <option value="Washington">Washington</option>
                                                      <option value="Patient">Patient</option>
                                                      <option value="Doctor's office">Doctor's office</option>
                                                      <option value="Non-billable other">Non-billable other</option>
                                                      <option value="Deposition">Deposition</option>
                                                      <option value="India">India</option>
                                                    </select>
                                                  </div>
                                            
                                                  <div class="form-group">
                                                    <label for="category">Category</label>
                                                    <select name="" id="category">
                                                      <option value="">--Select Category--</option>
                                                      <option value="general">General</option>
                                                      <option value="DDS">DDS</option>
                                                      <option value="workers compensation">Workers Compensation</option>
                                                      <option value="Patient">Patient</option>
                                                      <option value="Doctor's office">Doctor's office</option>
                                                      <option value="Non-billable other">Non-billable other</option>
                                                      <option value="Deposition">Deposition</option>
                                                    </select>
                                                  </div>
                                            
                                                  <div class="form-group">
                                                    <label for="header">Header</label>
                                                    <select name="" id="header">
                                                      <option value="">--Select Header--</option>
                                                      <option value="Base Fare">Base Fare</option>
                                                      <option value="Minimum Fee">Minimum Fee</option>
                                                      <option value="Flat Fee">Flat Fee</option>
                                                      <option value="Free For">Free For</option>
                                                      <option value="Per Page">Per Page</option>
                                                      <option value="Fee Limit">Fee Limit</option>
                                                      <option value="Fee Limit For Mail">Fee Limit For Mail</option>
                                                      <option value="Fee Limit For Electronic">Fee Limit For Electronic</option>
                                                      <option value="1 Page">1 Page</option>
                                                      <option value="1 to 5 Pages">1 to 5 Pages</option>
                                                      <option value="1 to 10 Pages">1 to 10 Pages</option>
                                                      <option value="1 to 20 Pages">1 to 20 Pages</option>
                                                      <option value="1 to 25 Pages">1 to 25 Pages</option>
                                                      <option value="1 to 30 Pages">1 to 30 Pages</option>
                                                      <option value="1 to 40 Pages">1 to 40 Pages</option>
                                                      <option value="1 to 50 Pages">1 to 50 Pages</option>
                                                      <option value="1 to 80 Pages">1 to 80 Pages</option>
                                                      <option value="1 to 100 Pages">1 to 100 Pages</option>
                                                      <option value="1 to 150 Pages">1 to 150 Pages</option>
                                                      <option value="1 to 250 Pages">1 to 250 Pages</option>
                                                      <option value="1 to 1000 Pages">1 to 1000 Pages</option>
                                                      <option value="2 to 30 Pages">2 to 30 Pages</option>
                                                      <option value="2 to 200 Pages">2 to 200 Pages</option>
                                                      <option value="11 to 20 Pages">11 to 20 Pages</option>
                                                      <option value="11 to 40 Pages">11 to 40 Pages</option>
                                                      <option value="11 to 50 Pages">11 to 50 Pages</option>
                                                      <option value="21 to 30 Pages">21 to 30 Pages</option>
                                                      <option value="21 to 40 Pages">21 to 40 Pages</option>
                                                      <option value="21 to 50 Pages">21 to 50 Pages</option>
                                                      <option value="21 to 60 Pages">21 to 60 Pages</option>
                                                      <option value="21 to 100 Pages">21 to 100 Pages</option>
                                                      <option value="21 to 500 Pages">21 to 500 Pages</option>
                                                      <option value="26 to 100 Pages">26 to 100 Pages</option>
                                                      <option value="26 to 350 Pages">26 to 350 Pages</option>
                                                      <option value="31 to 100 Pages">31 to 100 Pages</option>
                                                      <option value="101 to 200 Pages">101 to 200 Pages</option>
                                                      <option value="Above 5 Pages">Above 5 Pages</option>
                                                      <option value="Above 10 Pages">Above 10 Pages</option>
                                                      <option value="Above 20 Pages">Above 20 Pages</option>
                                                      <option value="Above 25 Pages">Above 25 Pages</option>
                                                      <option value="Above 30 Pages">Above 30 Pages</option>
                                                      <option value="Above 40 Pages">Above 40 Pages</option>
                                                      <option value="Above 50 Pages">Above 50 Pages</option>
                                                      <option value="Above 60 Pages">Above 60 Pages</option>
                                                      <option value="Above 80 Pages">Above 80 Pages</option>
                                                      <option value="Above 100 Pages">Above 100 Pages</option>
                                                      <option value="Above 150 Pages">Above 150 Pages</option>
                                                      <option value="Above 200 Pages">Above 200 Pages</option>
                                                      <option value="Above 250 Pages">Above 250 Pages</option>
                                                      <option value="Above 350 Pages">Above 350 Pages</option>
                                                      <option value="Above 500 Pages">Above 500 Pages</option>
                                                      <option value="Above 1000 Pages">Above 1000 Pages</option>
                                                      <option value="First Hour">First Hour</option>
                                                      <option value="Each Additional Hour">Each Additional Hour</option>
                                                      <option value="Required Fee">Required Fee</option>
                                                      <option value="Amount">Amount</option>
                                                      <option value="Optional Fee">Optional Fee</option>
                                                      <option value="Amount 1">Amount 1</option>
                                                      <option value="Optional Fee 1">Optional Fee 1</option>
                                                      <option value="Amount 2">Amount 2</option>
                                                      <option value="Minimum Fee">Minimum Fee</option>
                                                      <option value="Email">Email</option>
                                                      <option value="Mail">Mail</option>

                                                    </select>
                                                    
                                            
                                                    <input type="text" id="charge" placeholder="$ 0.00" style="padding: 8px; border-radius: 5px;">
                                                    <button type="submit" class="btn btn-success" style="padding: 3px 10px; font-size: 12px;"><i class="fas fa-arrow-right"></i></button>
                                                  </div>
                                                </form>
                                              </div>
                                            
                                              <div class="table-column" style="display: none;">
                                                <table class="table">
                                                    <thead>
                                                        <tr>
                                                            <td>S.no</td>
                                                            <td>Title</td>
                                                            <td>Values</td>
                                                            <td>Action</td>
                                                        </tr>
                                                    </thead>
                                                    <tbody id="chargeTableBody">
                                                        <!-- State row will be added here by JS if applicable -->
                                                        <!-- Category row will be added here by JS if applicable -->
                                                    </tbody>
                                                </table>
                                                <button class="btn btn-primary" style="float: right; padding: 2px 15px;" onclick="saveTableData()">Save</button>
                                            </div>
                                            
                                            
                                              
                                            </div>
                                            </div>


                                            



                                        </div>
                                         <!-- table-responsive --> 
                                        </div>

                                                      
                                        <!-- <div class="col-md-4">
                                            <div class="demo-box">
                                                <h4 class="header-title m-t-0">Pie Chart</h4>
                                                 

                                                <div class="google-chart text-center">
                                                    <div class="chart" id="pie-3d-chart"></div>
                                                </div>
                                            </div>
                                        </div> -->
                                        <div class="col-md-4">
                                            <div class="demo-box">
                                            {% autoescape off %}
                                            {{ plot_div }}
                                            {% endautoescape %}
                                            </div>
                                        </div>
                        </div>
        </div>
    </div>

    <!-- [ Main Content ] start -->
       
       
          <div class="pct-c-btn" style="display: none;">
            <a href="#" data-bs-toggle="offcanvas" data-bs-target="#offcanvas_pc_layout">
              <i class="ph-duotone ph-gear-six"></i>
            </a>
          </div>
      <div class="offcanvas border-0 pct-offcanvas offcanvas-end" tabindex="-1" id="offcanvas_pc_layout">
        <div class="offcanvas-header">
          <h5 class="offcanvas-title">Settings</h5>
          <button type="button" class="btn btn-icon btn-link-danger ms-auto" data-bs-dismiss="offcanvas" aria-label="Close"
            ><i class="ti ti-x"></i
          ></button>
        </div>
        <div class="pct-body customizer-body">
          <div class="offcanvas-body py-0">
            <ul class="list-group list-group-flush">
              <li class="list-group-item">
                <div class="pc-dark">
                  <h6 class="mb-1">Theme Mode</h6>
                  <p class="text-muted text-sm">Choose light or dark mode or Auto</p>
                  <div class="row theme-color theme-layout">
                    <div class="col-4">
                      <div class="d-grid">
                        <button
                          class="preset-btn btn active"
                          data-value="true"
                          onclick="layout_change('light');"
                          data-bs-toggle="tooltip"
                          title="Light"
                        >
                          <svg class="pc-icon text-warning">
                            <use xlink:href="#custom-sun-1"></use>
                          </svg>
                        </button>
                      </div>
                    </div>
                    <div class="col-4">
                      <div class="d-grid">
                        <button class="preset-btn btn" data-value="false" onclick="layout_change('dark');" data-bs-toggle="tooltip" title="Dark">
                          <svg class="pc-icon">
                            <use xlink:href="#custom-moon"></use>
                          </svg>
                        </button>
                      </div>
                    </div>
                    <div class="col-4">
                      <div class="d-grid">
                        <button
                          class="preset-btn btn"
                          data-value="default"
                          onclick="layout_change_default();"
                          data-bs-toggle="tooltip"
                          title="Automatically sets the theme based on user's operating system's color scheme."
                        >
                          <span class="pc-lay-icon d-flex align-items-center justify-content-center">
                            <i class="ph-duotone ph-cpu"></i>
                          </span>
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </li>
              <li class="list-group-item">
                <h6 class="mb-1">Theme Contrast</h6>
                <p class="text-muted text-sm">Choose theme contrast</p>
                <div class="row theme-contrast">
                  <div class="col-6">
                    <div class="d-grid">
                      <button
                        class="preset-btn btn"
                        data-value="true"
                        onclick="layout_theme_contrast_change('true');"
                        data-bs-toggle="tooltip"
                        title="True"
                      >
                        <svg class="pc-icon">
                          <use xlink:href="#custom-mask"></use>
                        </svg>
                      </button>
                    </div>
                  </div>
                  <div class="col-6">
                    <div class="d-grid">
                      <button
                        class="preset-btn btn active"
                        data-value="false"
                        onclick="layout_theme_contrast_change('false');"
                        data-bs-toggle="tooltip"
                        title="False"
                      >
                        <svg class="pc-icon">
                          <use xlink:href="#custom-mask-1-outline"></use>
                        </svg>
                      </button>
                    </div>
                  </div>
                </div>
              </li>
              <li class="list-group-item">
                <h6 class="mb-1">Custom Theme</h6>
                <p class="text-muted text-sm">Choose your primary theme color</p>
                <div class="theme-color preset-color">
                  <a href="#!" data-bs-toggle="tooltip" title="Blue" class="active" data-value="preset-1"><i class="ti ti-checks"></i></a>
                  <a href="#!" data-bs-toggle="tooltip" title="Indigo" data-value="preset-2"><i class="ti ti-checks"></i></a>
                  <a href="#!" data-bs-toggle="tooltip" title="Purple" data-value="preset-3"><i class="ti ti-checks"></i></a>
                  <a href="#!" data-bs-toggle="tooltip" title="Pink" data-value="preset-4"><i class="ti ti-checks"></i></a>
                  <a href="#!" data-bs-toggle="tooltip" title="Red" data-value="preset-5"><i class="ti ti-checks"></i></a>
                  <a href="#!" data-bs-toggle="tooltip" title="Orange" data-value="preset-6"><i class="ti ti-checks"></i></a>
                  <a href="#!" data-bs-toggle="tooltip" title="Yellow" data-value="preset-7"><i class="ti ti-checks"></i></a>
                  <a href="#!" data-bs-toggle="tooltip" title="Green" data-value="preset-8"><i class="ti ti-checks"></i></a>
                  <a href="#!" data-bs-toggle="tooltip" title="Teal" data-value="preset-9"><i class="ti ti-checks"></i></a>
                  <a href="#!" data-bs-toggle="tooltip" title="Cyan" data-value="preset-10"><i class="ti ti-checks"></i></a>
                </div>
              </li>
              <li class="list-group-item">
                <h6 class="mb-1">Theme layout</h6>
                <p class="text-muted text-sm">Choose your layout</p>
                <div class="theme-main-layout d-flex align-center gap-1 w-100">
                  
                  <a href="#!" data-bs-toggle="tooltip" title="Horizontal" data-value="horizontal">
                    <img src="{% static 'images/customizer/horizontal.svg' %}" alt="img" class="img-fluid" />
                  </a>
                  <a href="#!" data-bs-toggle="tooltip" title="Color Header" data-value="color-header">
                    <img src="{% static 'images/customizer/color-header.svg' %}" alt="img" class="img-fluid" />
                  </a>
                  <!-- <a href="#!" data-bs-toggle="tooltip" title="Compact" data-value="compact">
                    <img src="..//images/customizer/compact.svg" alt="img" class="img-fluid" /> 
                  </a> -->
                  <a href="#!" data-bs-toggle="tooltip" title="Tab" data-value="tab">
                    <img src="{% static 'images/customizer/tab.svg' %}" alt="img" class="img-fluid" />
                  </a>
                </div>
              </li>
              <li class="list-group-item">
                <h6 class="mb-1">Sidebar Caption</h6>
                <p class="text-muted text-sm">Sidebar Caption Hide/Show</p>
                <div class="row theme-color theme-nav-caption">
                  <div class="col-6">
                    <div class="d-grid">
                      <button
                        class="preset-btn btn-img btn active"
                        data-value="true"
                        onclick="layout_caption_change('true');"
                        data-bs-toggle="tooltip"
                        title="Caption Show"
                      >
                        <img src="{% static 'images/customizer/caption-on.svg' %}" alt="img" class="img-fluid" />
                      </button>
                    </div>
                  </div>
                  <div class="col-6">
                    <div class="d-grid">
                      <button
                        class="preset-btn btn-img btn"
                        data-value="false"
                        onclick="layout_caption_change('false');"
                        data-bs-toggle="tooltip"
                        title="Caption Hide"
                      >
                        <img src="{% static 'images/customizer/caption-off.svg' %}" alt="img" class="img-fluid" />
                      </button>
                    </div>
                  </div>
                </div>
              </li>
              <li class="list-group-item">
                <div class="pc-rtl">
                  <h6 class="mb-1">Theme Layout</h6>
                  <p class="text-muted text-sm">LTR/RTL</p>
                  <div class="row theme-color theme-direction">
                    <div class="col-6">
                      <div class="d-grid">
                        <button
                          class="preset-btn btn-img btn active"
                          data-value="false"
                          onclick="layout_rtl_change('false');"
                          data-bs-toggle="tooltip"
                          title="LTR"
                        >
                          <img src="{% static 'images/customizer/ltr.svg' %}" alt="img" class="img-fluid" />
                        </button>
                      </div>
                    </div>
                    <div class="col-6">
                      <div class="d-grid">
                        <button
                          class="preset-btn btn-img btn"
                          data-value="true"
                          onclick="layout_rtl_change('true');"
                          data-bs-toggle="tooltip"
                          title="RTL"
                        >
                          <img src="{% static 'images/customizer/rtl.svg' %}" alt="img" class="img-fluid" />
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </li>
              <li class="list-group-item pc-box-width">
                <div class="pc-container-width">
                  <h6 class="mb-1">Layout Width</h6>
                  <p class="text-muted text-sm">Choose Full or Container Layout</p>
                  <div class="row theme-color theme-container">
                    <div class="col-6">
                      <div class="d-grid">
                        <button
                          class="preset-btn btn-img btn active"
                          data-value="false"
                          onclick="change_box_container('false')"
                          data-bs-toggle="tooltip"
                          title="Full Width"
                        >
                          <img src="{% static 'images/customizer/full.svg' %}" alt="img" class="img-fluid" />
                        </button>
                      </div>
                    </div>
                    <div class="col-6">
                      <div class="d-grid">
                        <button
                          class="preset-btn btn-img btn"
                          data-value="true"
                          onclick="change_box_container('true')"
                          data-bs-toggle="tooltip"
                          title="Fixed Width"
                        >
                          <img src="{% static 'images/customizer/fixed.svg' %}" alt="img" class="img-fluid" />
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </li>
              <li class="list-group-item">
                <div class="d-grid">
                  <button class="btn btn-light-danger" id="layoutreset">Reset Layout</button>
                </div>
              </li>
            </ul>
          </div>
        </div>
      </div>


      <script>
        localStorage.setItem('layout', 'compact');
      </script>
          <!-- [Page Specific JS] start -->

          <!-- <script src="{% static 'js/plugins/apexcharts.min.js' %}"></script> -->
          <!-- <script src="{% static 'js/pages/dashboard-default.js' %}"></script> -->
          <!-- [Page Specific JS] end -->
          <!-- Required Js -->
          <!-- <script src="{% static 'js/plugins/popper.min.js' %}"></script> -->
          <script src="{% static 'js/plugins/simplebar.min.js' %}"></script>
          <!-- <script src="{% static 'js/plugins/bootstrap.min.js' %}"></script> -->
          <script src="{% static 'js/fonts/custom-font.js' %}"></script>
          <script src="{% static 'js/pcoded.js' %}"></script>
          <script src="{% static 'js/plugins/feather.min.js' %}"></script>
          <!-- Include jQuery -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<!-- Include Popper.js -->
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"></script>
<!-- Include Bootstrap JS -->
<!-- Include DataTables JS -->
<script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>


          <script>
            layout_change('light');
          </script>
            
          <!-- <script>
            change_box_container('false');
          </script> -->
           
          <script>
            layout_caption_change('true');
          </script>
           
          <script>
            layout_rtl_change('false');
          </script>
           
          <script>
            preset_change('preset-1');
          </script>
           
          <script>
            main_layout_change('vertical');
          </script>



<script>




document.getElementById('state').addEventListener('change', function() {
    updateTableRow('state', this.value);
    fetchAndUpdateTable();  // Fetch and update table data when state changes
});

document.getElementById('category').addEventListener('change', function() {
    updateTableRow('category', this.value);
    fetchAndUpdateTable();  // Fetch and update table data when category changes
});

document.getElementById('chargeForm').addEventListener('submit', function(event) {
    event.preventDefault(); // Prevent the form from submitting normally

    const header = document.getElementById('header').value;
    const charge = document.getElementById('charge').value;

    if (header && charge) {
        updateTableRow(header, charge);
    }

    // Clear the charge input after updating the table
    document.getElementById('charge').value = '';
});

function updateTableRow(type, value) {
    const chargeTableBody = document.getElementById('chargeTableBody');
    const rows = Array.from(chargeTableBody.rows);
    // Find a row where the second cell (Title) exactly matches the header type
    let row = rows.find(r => r.cells[1].dataset.raw === type);

    if (value) {
        if (row) {
            // Update the existing row
            row.cells[2].innerText = formatValue(value);
        } else {
            // Create a new row if it doesn't exist
            row = document.createElement('tr');
            row.id = type + 'Row';
            row.innerHTML = `
                <td></td>
                <td data-raw="${type}">${capitalizeHeader(type)}</td>
                <td>${formatValue(value)}</td>
                <td>${type !== 'state' && type !== 'category' ? '<i class="fas fa-trash delete-icon" style="color: red; cursor: pointer;" onclick="deleteRow(this)"></i>' : ''}</td>
            `;
            chargeTableBody.appendChild(row);
        }
    } else if (row) {
        // Remove the row if the value is empty
        row.remove();
    }

    // Update the serial numbers after any change
    updateSerialNumbers();

    // Show the table if there are rows
    if (chargeTableBody.children.length > 0) {
        document.querySelector('.table-column').style.display = 'block';
    } else {
        document.querySelector('.table-column').style.display = 'none';
    }
}

function updateSerialNumbers() {
    const rows = document.querySelectorAll('#chargeTableBody tr');
    rows.forEach((row, index) => {
        row.cells[0].innerText = index + 1;
    });
}

function capitalizeHeader(header) {
    return header.split('_').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' ');
}

function formatValue(value) {
    // Check if the value is a number and add "$" in front
    if (!isNaN(value.trim()) && value.trim() !== '') {
        return `$${value}`;
    }
    return value;
}

function fetchAndUpdateTable() {
    const state = document.getElementById('state').value;
    const category = document.getElementById('category').value;

    if (state && category) {
        const formData = new FormData();
        formData.append('state', state);
        formData.append('category', category);

        const csrftoken = document.querySelector('[name=csrfmiddlewaretoken]').value;

        fetch('/get-charging-data/', {
            method: 'POST',
            body: formData,
            headers: {
                'X-CSRFToken': csrftoken,  // Include the CSRF token in the headers
                'Accept': 'application/json',
            }
        })
        .then(response => {
            if (!response.ok) {
                throw new Error(`HTTP error! Status: ${response.status}`);
            }
            return response.json();
        })
        .then(data => {
            if (data.status === 'success') {
                updateTableWithData(data.data);
            } else {
                alert('Failed to retrieve data: ' + data.message);
            }
        })
        .catch(error => console.error('Error:', error));
    }
}

function updateTableWithData(data) {
    const chargeTableBody = document.getElementById('chargeTableBody');

    // Keep state and category rows if they exist
    const stateRow = document.getElementById('stateRow');
    const categoryRow = document.getElementById('categoryRow');
    
    chargeTableBody.innerHTML = ''; // Clear all rows
    
    // Re-append state and category rows if they exist
    if (stateRow) {
        chargeTableBody.appendChild(stateRow);
    }
    if (categoryRow) {
        chargeTableBody.appendChild(categoryRow);
    }

    let rowCount = chargeTableBody.children.length;

    // Iterate over the fetched data and create table rows
    for (const key in data) {
        if (data[key]) {
            let value = data[key];

            // Check if the value is a number and add "$" in front
            if (!isNaN(value) && value.trim() !== '') {
                value = `$${value}`;
            }

            const newRow = document.createElement('tr');
            newRow.id = key + 'Row'; // Assign id to each row based on the key
            newRow.innerHTML = `
                <td>${++rowCount}</td>
                <td data-raw="${key}">${capitalizeHeader(key)}</td>
                <td>${value}</td>
                <td>${key !== 'state' && key !== 'category' ? '<i class="fas fa-trash delete-icon" style="color: red; cursor: pointer;" onclick="deleteRow(this)"></i>' : ''}</td>
            `;
            chargeTableBody.appendChild(newRow);
        }
    }

    // Update serial numbers after reappending state and category rows
    updateSerialNumbers();

    // Show the table if there are rows to display
    document.querySelector('.table-column').style.display = rowCount > 0 ? 'block' : 'none';
}

// Function to delete a row
function deleteRow(icon) {
    const row = icon.closest('tr');
    row.remove();

    // Update serial numbers after row deletion
    updateSerialNumbers();
}


function saveTableData() {
    const rows = document.querySelectorAll('#chargeTableBody tr');
    const state = document.getElementById('state').value;
    const category = document.getElementById('category').value;

    if (!state || !category) {
        alert('Please select both state and category before saving.');
        return;
    }

    const data = {
        state: state,
        category: category,
        charges: []
    };

    rows.forEach(row => {
        let title = row.cells[1].dataset.raw.toLowerCase().replace(/ /g, '_');
        let value = row.cells[2].innerText.replace('$', '');

        // Handle specific mappings for page ranges
        if (title.includes('pages')) {
            title = title.replace(/(\d+)_to_(\d+)_pages/, 'page_$1_to_$2');
            title = title.replace(/(\d+)_pages/, 'page_$1');
        } else if (title === '1_page') {
            title = 'page_1';  // Special case for "1 Page"
        }

        if (title !== 'state' && title !== 'category') {
            data.charges.push({ title: title, value: value });
        }
    });

    const csrftoken = document.querySelector('[name=csrfmiddlewaretoken]').value;

    fetch('/save_charging_data/', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify(data)
    })
    .then(response => response.json())
    .then(data => {
        if (data.status === 'success') {
            alert('Data saved successfully!');
        } else {
            alert('Failed to save data: ' + data.message);
        }
    })
    .catch(error => console.error('Error:', error));
}













</script>
          
      
        </body>
        <!-- [Body] end -->
      </html>
      